# API ëª…ì„¸ì„œ

---

# ğŸ“„ Mailer API ëª…ì„¸ì„œ

## 1. ì‚¬ìš©ì ì¸ì¦

#ë¡œ ê°ì‹¼ ë‚´ìš©ì€ ë”±íˆ ë°±ì—”ë“œì—ì„œ ë³„ë„ì˜ ì ˆì°¨ê°€ í•„ìš”í•˜ì§€ëŠ” ì•Šì€ ë“¯.

##################################################################

### 1.1. ì¸ì¦ íë¦„ ê°œìš”

ë³¸ í”„ë¡œì íŠ¸ì˜ ì¸ì¦ì€ **Clerk** ì„œë¹„ìŠ¤ë¥¼ í†µí•´ ì²˜ë¦¬ëœë‹¤.

- **Clerk**: ì‚¬ìš©ì ì •ë³´ ê´€ë¦¬, íšŒì›ê°€ì…/ë¡œê·¸ì¸ UI ì œê³µ, JWT ë°œê¸‰
- **í”„ë¡ íŠ¸ì—”ë“œ**: Clerk UI ì—°ë™, ë°œê¸‰ëœ JWT ì €ì¥ ë° API ìš”ì²­ ì‹œ í—¤ë”ì— ì „ì†¡
- **ë°±ì—”ë“œ**: JWT ìœ íš¨ì„± ê²€ì¦ (Stateless ë°©ì‹)

### 1.2. íšŒì›ê°€ì…

- **ì£¼ì²´**: í”„ë¡ íŠ¸ì—”ë“œ + Clerk
- **íë¦„**:
    1. ì‚¬ìš©ìê°€ í”„ë¡ íŠ¸ì—”ë“œì—ì„œ íšŒì›ê°€ì…ì„ ì‹œì‘í•œë‹¤.
    2. í”„ë¡ íŠ¸ì—”ë“œëŠ” Clerk íšŒì›ê°€ì… UIë¥¼ ë Œë”ë§í•œë‹¤.
    3. ì‚¬ìš©ìëŠ” Clerk UIë¥¼ í†µí•´ ê°€ì…ì„ ì™„ë£Œí•œë‹¤.
    4. ê°€ì… ì„±ê³µ ì‹œ, Clerkì€ ìƒˆë¡œìš´ **Clerk User ID**ë¥¼ ìƒì„±í•œë‹¤.

> [Backend] ë°±ì—”ë“œ í›„ì† ì²˜ë¦¬ (ìµœì´ˆ API ìš”ì²­ ì‹œ)
> 
> 1. ê°€ì…í•œ ì‚¬ìš©ìê°€ ì²˜ìŒ APIë¥¼ í˜¸ì¶œí•˜ë©´ `ClerkAuthentication` ë¯¸ë“¤ì›¨ì–´ê°€ JWTì—ì„œ Clerk User IDë¥¼ ì¶”ì¶œí•œë‹¤.
> 2. í•´ë‹¹ IDê°€ `User` DBì— ìˆëŠ”ì§€ í™•ì¸í•œë‹¤.
> 3. **DBì— ì—†ë‹¤ë©´, Clerk User IDë¥¼ `user_id` í•„ë“œì— ì €ì¥í•˜ì—¬ ìƒˆ `User` ë ˆì½”ë“œë¥¼ ìë™ ìƒì„±í•œë‹¤.** (`get_or_create` ë¡œì§)
> 4. ì´ ì‹œì ë¶€í„° Clerk ì‚¬ìš©ìì™€ ë°±ì—”ë“œ `User`ê°€ 1:1 ë¡œ ë§¤í•‘ëœë‹¤.

### 1.3. ë¡œê·¸ì¸ (Login)

- **ì£¼ì²´**: í”„ë¡ íŠ¸ì—”ë“œ + Clerk
- **íë¦„**:
    1. ì‚¬ìš©ìê°€ í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ë¡œê·¸ì¸ì„ ì‹œì‘í•œë‹¤.
    2. í”„ë¡ íŠ¸ì—”ë“œëŠ” Clerk ë¡œê·¸ì¸ UIë¥¼ ë Œë”ë§í•œë‹¤.
    3. ë¡œê·¸ì¸ ì„±ê³µ ì‹œ, Clerkì€ JWTë¥¼ ìƒì„±í•˜ì—¬ í”„ë¡ íŠ¸ì—”ë“œì— ì „ë‹¬í•œë‹¤.
    4. í”„ë¡ íŠ¸ì—”ë“œëŠ” JWTë¥¼ ì•ˆì „í•˜ê²Œ ì €ì¥í•˜ê³ , ì´í›„ ëª¨ë“  API ìš”ì²­ì˜ `Authorization` í—¤ë”ì— ë‹´ì•„ ì „ì†¡í•œë‹¤.
- **ë°±ì—”ë“œ ì—­í• **: ë¡œê·¸ì¸ ê³¼ì • ìì²´ì—ëŠ” ê´€ì—¬í•˜ì§€ ì•Šìœ¼ë©°, API ìš”ì²­ ì‹œ JWTë¥¼ ê²€ì¦í•  ë¿ì´ë‹¤. ì¦‰, ë¡œê·¸ì¸ì„ ìœ„í•œ ë³„ë„ì˜ APIê°€ í•„ìš”í•˜ì§€ëŠ” ì•Šë‹¤.

### 1.4. ë¡œê·¸ì•„ì›ƒ (Logout)

- **ì£¼ì²´**: í”„ë¡ íŠ¸ì—”ë“œ
- **íë¦„**:
    1. ì‚¬ìš©ìê°€ ë¡œê·¸ì•„ì›ƒì„ ìš”ì²­í•œë‹¤.
    2. í”„ë¡ íŠ¸ì—”ë“œëŠ” Clerk SDKë¥¼ í˜¸ì¶œí•˜ì—¬ Clerk ì„¸ì…˜ì„ ì¢…ë£Œì‹œí‚¨ë‹¤.
    3. í”„ë¡ íŠ¸ì—”ë“œëŠ” ë¡œì»¬ì— ì €ì¥í•˜ê³  ìˆë˜ JWTë¥¼ íê¸°í•œë‹¤.
- **ë°±ì—”ë“œ ì—­í• : ë”°ë¡œ ê´€ì—¬í•˜ì§€ ì•ŠìŒ. êµ³ì´ í•˜ê³ ì í•œë‹¤ë©´ user_id ì‚­ì œ? â†’ ì´ëŸ¬ë©´ ì•„ì˜ˆ ê³„ì • ì‚­ì œë¼ êµ³ì´ í•  í•„ìš” ì—†ì„ë“¯**

#######################################################################

ì‚¬ì‹¤ìƒ APIëŠ” ì—¬ê¸°ë¶€í„°.

### 1.5. íšŒì› íƒˆí‡´ (Delete Account)

```jsx
DELETE /api/user/delete/
```

- **ì„¤ëª…**: ìš”ì²­ì„ ë³´ë‚¸ ì‚¬ìš©ìì˜ ë°±ì—”ë“œ DB ì •ë³´(User, ì—°ë™ ê³„ì •, ì£¼ì†Œë¡ ë“±)ë¥¼ ëª¨ë‘ ì‚­ì œí•œë‹¤.
- **ë°±ì—”ë“œ ì—­í• **:
    1. JWTë¥¼ í†µí•´ ì‚¬ìš©ìë¥¼ ì‹ë³„í•œë‹¤.
    2. DBì—ì„œ í•´ë‹¹ `User` ë ˆì½”ë“œì™€ ëª¨ë“  ì¢…ì† ë°ì´í„°(Email ê³„ì •, ì£¼ì†Œë¡, í…œí”Œë¦¿ ë“±)ë¥¼ ì‚­ì œí•œë‹¤. (`on_delete=models.CASCADE`)
    3. ì„±ê³µ ì‘ë‹µ(204)ì„ ë°˜í™˜í•œë‹¤.
- **Success Response**:
    - **Code**: `204 No Content`
- **Error Response**:
    - **Code**: `401 Unauthorized`JSON
    
    ```jsx
    { "detail": "Authentication credentials were not provided." }
    ```
    
    - **Code**: `500 Internal Server Error`JSON
    
    ```jsx
    { "detail": "An unexpected error occurred on the server." }
    ```
    

> [Frontend] í”„ë¡ íŠ¸ì—”ë“œ í›„ì† ì²˜ë¦¬
> 
> 1. ë°±ì—”ë“œë¡œë¶€í„° `204 No Content` ì‘ë‹µì„ ë°›ëŠ”ë‹¤.
> 2. **(í•„ìˆ˜) Clerk SDKë¥¼ í˜¸ì¶œí•˜ì—¬ Clerkì— ë“±ë¡ëœ ì‹¤ì œ ì‚¬ìš©ì ì •ë³´ê¹Œì§€ ì‚­ì œí•œë‹¤.** (ì´ ë‹¨ê³„ë¥¼ ìƒëµí•˜ë©´ ìš°ë¦¬ DBì—ì„œëŠ” ì‚­ì œëì§€ë§Œ Clerkì—ëŠ” ê³„ì •ì´ ë‚¨ê²Œ ë¨.)
> 3. ë¡œì»¬ì— ì €ì¥ëœ JWTë¥¼ ì‚­ì œí•˜ê³  ì‚¬ìš©ìë¥¼ ì™„ì „íˆ ë¡œê·¸ì•„ì›ƒì‹œí‚¨ë‹¤.

---

## 2. ì´ë©”ì¼ ê³„ì • ê´€ë¦¬ (email_account)

```jsx
GET /api/account/
```

### 2.1. ì—°ë™ëœ ë©”ì¼ ê³„ì • ëª©ë¡ ì¡°íšŒ

- **ì„¤ëª…**: í˜„ì¬ ë¡œê·¸ì¸ëœ ì‚¬ìš©ìê°€ ì—°ë™í•œ ëª¨ë“  ì´ë©”ì¼ ê³„ì • ëª©ë¡ì„ ì¡°íšŒí•œë‹¤. ì´ë ‡ê²Œ ì¡°íšŒí•œ ê³„ì •ë“¤ì€ ì´í•˜ì˜ apië“¤ì—ì„œ ì‚¬ìš©ë  ìˆ˜ ìˆë‹¤.
- **Success Response**:
    - **Code**: `200 OK`JSON
        
        ```jsx
        [
          {
            "id": 1,
            "address": "user1@example.com",
            "domain": "example.com",
            "is_valid": true,
            "last_synced": "2025-10-28T10:00:00Z"
          }
        ]
        ```
        
- **Error Response**:
    - **Code**: `401 Unauthorized` (mailer ë¡œê·¸ì¸ ì•ˆí•œ ìƒíƒœì¼ ì‹œ.)

### 2.2. ë©”ì¼ ê³„ì • ì—°ë™

```jsx
POST /api/account/
```

- **ì„¤ëª…**: ìƒˆë¡œìš´ ì´ë©”ì¼ ê³„ì •ì„ ì—°ë™í•œë‹¤. ë¹„ë°€ë²ˆí˜¸ëŠ” ì•”í˜¸í™”ë˜ì–´ ì €ì¥ëœë‹¤.
- **Request Body**:
    
    ```jsx
    {
      "address": "new_user@gmail.com",
      "password": "very-secret-password",
      "domain": "imap.gmail.com"
    }
    ```
    
- **Success Response**:
    - **Code**: `201 Created`
        
        ```jsx
        {
          "id": 2,
          "address": "new_user@gmail.com",
          "domain": "imap.gmail.com",
          "is_valid": true,
          "last_synced": null
        }
        ```
        
- **Error Response**:
    - **Code**: `400 Bad Request`
        
        ```jsx
        { "address": ["Enter a valid email address."] }
        ```
        
    - **Code**: `409 Conflict`
        
        ```jsx
        { "detail": "This email account is already registered." }
        ```
        

### 2.3. ì—°ë™ëœ ë©”ì¼ ê³„ì • ì‚­ì œ

```jsx
DELETE /api/account/{account_id}/
```

- **ì„¤ëª…**: ì§€ì •ëœ IDì˜ ì´ë©”ì¼ ê³„ì • ì—°ë™ì„ ì‚­ì œí•œë‹¤.
- **Success Response**:
    - **Code**: `204 No Content`
- **Error Response**:
    - **Code**: `403 Forbidden` (ìì‹ ì˜ ê³„ì •ì´ ì•„ë‹ ê²½ìš°)
        
        ```jsx
        { "detail": "You do not have permission to perform this action." }
        ```
        
    - **Code**: `404 Not Found` (í•´ë‹¹ ê³„ì •ì„ ì°¾ì„ ìˆ˜ ì—†ì„ ê²½ìš°)
        
        ```jsx
        { "detail": "Not found." }
        ```
        

### 2.4. ë©”ì¼ ê³„ì • í”„ë¡œí•„ ì„¤ì •&ìˆ˜ì • â†’ ~~ìš°ë¦¬ ë©”ì¼ ê³„ì •ì— ì´ëŸ°ê²ƒë„ ì €ì¥í•´..?~~

A. figmaì— ìš”ê±° ë°˜ì˜í•˜ëŠ” ìš©ë„

![image.png](attachment:5a495ac6-f6ff-4c0b-94b9-20a30085e1e2:image.png)

```jsx
PATCH /api/account/{account_id}/profile/
```

- **ì„¤ëª…**: ì§€ì •ëœ ì´ë©”ì¼ ê³„ì •(`account_id`)ì˜ í”„ë¡œí•„ì„ ì„¤ì •í•˜ê±°ë‚˜ ìˆ˜ì •í•œë‹¤. `PATCH` ë©”ì„œë“œì´ë¯€ë¡œ, **ë³€ê²½í•˜ë ¤ëŠ” í•„ë“œë§Œ** ìš”ì²­ ë°”ë””ì— ë‹´ì•„ ë³´ë‚¼ ìˆ˜ ìˆë‹¤. í•´ë‹¹ í”„ë¡œí•„ì€ ì´í›„ ìŠ¤íŒ¸ í•„í„°ë§ì— ì‚¬ìš©ëœë‹¤.
- **Request Body**: (ëª¨ë“  í•„ë“œëŠ” ì„ íƒì )
    
    ```jsx
    {
    	"job": "ë°ì´í„° ë¶„ì„ê°€"
      "usage": "í•™êµìš©"
    	"interests": ["ê¸ˆìœµ", "ë¶€ë™ì‚°"], (ë¦¬ìŠ¤íŠ¸ í˜•íƒœ)
      
    }
    ```
    
    - ìœ„ í•„ë“œ ì¤‘ ì¼ë¶€ë§Œ ë‹´ì•„ì„œ ì—…ë°ì´íŠ¸í•  ìˆ˜ë„ ìˆë‹¤.
- **Success Response**:
    - **Code**: `200 OK` (ìˆ˜ì • í›„ ì‘ë‹µ)
        
        ```jsx
        {
        	"job": "ë°ì´í„° ë¶„ì„ê°€"
          "usage": "í•™êµìš©"
        	"interests": ["ê¸ˆìœµ", "ë¶€ë™ì‚°"], (ë¦¬ìŠ¤íŠ¸ í˜•íƒœ)
        }
        ```
        
- **Error Response**:
    - **Code**: `400 Bad Request` (ìš”ì²­ ë°ì´í„° ìœ íš¨ì„± ê²€ì‚¬ ì‹¤íŒ¨ ì‹œ, ì˜ˆ: `interests`ê°€ ë¦¬ìŠ¤íŠ¸ê°€ ì•„ë‹ ê²½ìš°)
        
        ```jsx
        { "interests": ["This field must be a list."] }
        ```
        
    - **Code**: `401 Unauthorized` (mailer ì•±ì— ë¡œê·¸ì¸í•˜ì§€ ì•Šì€ ê²½ìš°)
    - **Code**: `403 Forbidden` (ë‚´ ë©”ì¼ê³„ì •ì´ ì•„ë‹Œ ê²½ìš°)
    - **Code**: `404 Not Found` (í•´ë‹¹ ë©”ì¼ ê³„ì •ì´ ì—°ê²°ë˜ì§€ ì•Šì€ ê²½ìš°)

---

## 3. ë©”ì¼ ê´€ë¦¬

### 3.1. ë©”ì¼ ëª©ë¡ ì¡°íšŒ ë° ê²€ìƒ‰

```jsx
GET /api/email/
```

- **ì„¤ëª…**: ì‚¬ìš©ìì˜ ëª¨ë“  ì—°ë™ ê³„ì •ì— ëŒ€í•œ ë©”ì¼ ëª©ë¡ì„ ì¡°íšŒí•œë‹¤. ì—¬ëŸ¬ ì¡°ê±´ìœ¼ë¡œ í•„í„°ë§ ë° ê²€ìƒ‰ì´ ê°€ëŠ¥í•˜ë‹¤.
- **Query Parameters**:
    - `accounts` (optional, string): ì½¤ë§ˆ(`,`)ë¡œ êµ¬ë¶„ëœ ì´ë©”ì¼ ì£¼ì†Œ ëª©ë¡. íŠ¹ì • ê³„ì •ì˜ ë©”ì¼ë§Œ í•„í„°ë§í•œë‹¤. (ì˜ˆ: `user1@example.com,user2@work.com`)
    - `folder` (optional, string): `inbox`, `sent`, `starred`, `spam`, `trash` ì¤‘ í•˜ë‚˜ë¥¼ ì§€ì •í•˜ì—¬ íŠ¹ì • í´ë”ì˜ ë©”ì¼ë§Œ í•„í„°ë§í•œë‹¤.
    - `query` (optional, string): ê²€ìƒ‰ì–´. ë©”ì¼ì˜ ì œëª©, ë³¸ë¬¸, ë°œì‹ ì, ìˆ˜ì‹ ì í•„ë“œì—ì„œ í•´ë‹¹ ê²€ìƒ‰ì–´ë¥¼ í¬í•¨í•˜ëŠ” ë©”ì¼ì„ í•„í„°ë§í•œë‹¤.
- **Success Response**:
    - **Code**: `200 OK`
        
        ```jsx
        [
              {
                "id": 1,
                "account_address": "user1@example.com",
                "folder": "inbox",
                "is_read": false,
                "is_important": true,
                "is_pinned": false,
                "received_at": "2025-10-28T14:31:00Z",
                "email": {
                  "subject": "íšŒì˜ë¡ ì „ë‹¬",
                  "from_header": "colleague@example.com",
                  "date": "2025-10-28T14:30:00Z",
                  "preview": "ì•ˆë…•í•˜ì„¸ìš”, ì§€ë‚œ íšŒì˜ë¡ ì „ë‹¬ ë“œë¦½ë‹ˆë‹¤..."
                }
              }
        ]
        ```
        
- **Error Response**:
    - **Code**: `401 Unauthorized` (ë¡œê·¸ì¸í•˜ì§€ ì•Šì•˜ì„ ì‹œ)
    - **Code**: `400 Bad Request` (ì¡´ì¬í•˜ì§€ ì•Šê±°ë‚˜ ê¶Œí•œ ì—†ëŠ” `accounts` íŒŒë¼ë¯¸í„° ìš”ì²­ ì‹œ)
        
        ```jsx
        {
          "detail": "You do not have permission for the following accounts: ['wrong@email.com']"
        }
        ```
        

---

### 3.2. ë©”ì¼ ìƒì„¸ ì¡°íšŒ â† ì—¬ê¸°ì— Attachment ë¶ˆëŸ¬ì˜¤ê¸°ìœ„í•œ í•„ë“œ ì¶”ê°€í•´ì•¼í•¨

```jsx
GET /api/email/{email_metadata_id}/
```

- **ì„¤ëª…**: íŠ¹ì • ë©”ì¼ì˜ ìƒì„¸ ì •ë³´ë¥¼ ì¡°íšŒí•œë‹¤.
- **íŠ¹ì§•**: ì´ APIë¥¼ í˜¸ì¶œí•˜ë©´ í•´ë‹¹ ë©”ì¼ì€ ë°±ì—”ë“œì—ì„œ ìë™ìœ¼ë¡œ **'ì½ìŒ'(`is_read: true`) ìƒíƒœë¡œ ë³€ê²½ëœë‹¤**.
- **Success Response**:
    - **Code**: `200 OK`
        
        ```jsx
            {
              "id": 1,
              "account_address": "user1@example.com",
              "folder": "inbox",
              "is_read": true,
              "is_important": true,
              "is_pinned": false,
              "received_at": "2025-10-28T14:31:00Z",
              "email": {
                "subject": "íšŒì˜ë¡ ì „ë‹¬",
                "from_header": "colleague@example.com",
                "to_header": ["user1@example.com"],
                "cc_header": [],
                "bcc_header": [],
                "text_body": "ì•ˆë…•í•˜ì„¸ìš”, ì§€ë‚œ íšŒì˜ë¡ ì „ë‹¬ ë“œë¦½ë‹ˆë‹¤...",
                "html_body": "<p>ì•ˆë…•í•˜ì„¸ìš”, ì§€ë‚œ íšŒì˜ë¡ ì „ë‹¬ ë“œë¦½ë‹ˆë‹¤...</p>",
                "date": "2025-10-28T14:30:00Z"
              }
            }
        ```
        
- **Error Response**:
    - **Code**: `401 Unauthorized` (ë¡œê·¸ì¸ ì•ˆí–ˆì„ ì‹œ)
    - **Code**: `404 Not Found` (í•´ë‹¹ ì´ë©”ì¼ì´ ì—†ì„ ì‹œ)

---

### 3.3. ë©”ì¼ ìƒíƒœ ë³€ê²½

```jsx
PATCH /api/metadata/{email_metadata_id}/
```

- **ì„¤ëª…**: íŠ¹ì • ë©”ì¼ì˜ ìƒíƒœë¥¼ ë³€ê²½í•œë‹¤. í´ë” ì´ë™, ì½ìŒ/ì•ˆì½ìŒ ì²˜ë¦¬, ì¤‘ìš” í‘œì‹œ ë“±ì„ í•  ìˆ˜ ìˆë‹¤.
- **Request Body**: (ë³€ê²½í•  í•„ë“œë§Œ ì „ì†¡í•˜ë©´ ë¨)
    
    ```
      {
        "folder": "trash", <-- ì œí•œ ì—†ìŒ. (inbox -> trash, trash -> inboxë„ ê°€ëŠ¥)
        "is_read": true,
        "is_important": false,
        "is_pinned": true
      }
    ```
    
- **Success Response**:
    - **Code**: `200 OK` (ë³€ê²½ ì™„ë£Œëœ ì „ì²´ ë©”ì¼ ìƒì„¸ ì •ë³´ ë°˜í™˜)
    
    ```
        {
          "id": 1,
          "account_address": "user1@example.com",
          "folder": "trash",
          "is_read": true,
          "is_important": false,
          "is_pinned": true,
          "received_at": "2025-10-28T14:31:00Z",
          "email": {
            "subject": "íšŒì˜ë¡ ì „ë‹¬",
            "from_header": "colleague@example.com",
            "to_header": ["user1@example.com"],
            "cc_header": [],
            "bcc_header": [],
            "text_body": "ì•ˆë…•í•˜ì„¸ìš”, ì§€ë‚œ íšŒì˜ë¡ ì „ë‹¬ ë“œë¦½ë‹ˆë‹¤...",
            "html_body": "<p>ì•ˆë…•í•˜ì„¸ìš”, ì§€ë‚œ íšŒì˜ë¡ ì „ë‹¬ ë“œë¦½ë‹ˆë‹¤...</p>",
            "date": "2025-10-28T14:30:00Z"
          }
        }
    ```
    
- **Error Response**:
    - **Code**: `400 Bad Request` (ì˜ëª»ëœ request body ì‚¬ìš©ì‹œ)
    - **Code**: `401 Unauthorized` (ë¡œê·¸ì¸ ì•ˆí–ˆì„ ì‹œ)
    - **Code**: `404 Not Found` (í•´ë‹¹ ë©”ì¼ì´ ì—†ì„ ì‹œ)

---

### 3.4. ë©”ì¼ ì‚­ì œ

```jsx
DELETE /api/metadata/{email_metadata_id}/
```

- **ì„¤ëª…**: ë©”ì¼ì„ ì‚­ì œí•©ë‹ˆë‹¤. ë™ì‘ ë°©ì‹ì€ ë©”ì¼ì˜ í˜„ì¬ `folder` ìƒíƒœì— ë”°ë¼ ë‹¬ë¼ì§‘ë‹ˆë‹¤.
    - **ì¼ë°˜ í´ë” (inbox ë“±)ì— ìˆëŠ” ê²½ìš°**: ë©”ì¼ì„ íœ´ì§€í†µ(`trash`)ìœ¼ë¡œ ì´ë™ì‹œí‚µë‹ˆë‹¤. (ìƒíƒœ ë³€ê²½. ì‚¬ì‹¤ìƒ patchì™€ ë™ì¼í•œ ë™ì‘ì´ë‚˜ DELETEì˜ ê°œë…ì  í†µì¼ì„±ì„ ìœ„í•´ ì¶”ê°€í•œ ë¡œì§.)
    - **íœ´ì§€í†µ (`trash`)ì— ìˆëŠ” ê²½ìš°**: ë©”ì¼ì„ ì˜êµ¬ì ìœ¼ë¡œ ì‚­ì œí•©ë‹ˆë‹¤. (Soft Delete ì²˜ë¦¬)
- **Success Response**:
    - **Code**: `200 OK` (íœ´ì§€í†µìœ¼ë¡œ **ì´ë™** ì„±ê³µ ì‹œ, ì¦‰, í˜„ì¬ folderê°€ â€˜trashâ€™ê°€ ì•„ë‹Œ ìƒí™©ì—ì„œ ì‚­ì œ ì„±ê³µì‹œ. ì´ë™ëœ ë©”ì¼ ì •ë³´ë¥¼ ë°˜í™˜)
    
    ```
        {
          "id": 1,
          "account_address": "user1@example.com",
          "folder": "trash",
          "is_read": true,
          "is_important": false,
          "is_pinned": false,
          "received_at": "2025-10-28T14:31:00Z",
          "email": {
            "subject": "íšŒì˜ë¡ ì „ë‹¬",
            "from_header": "colleague@example.com",
            "to_header": ["user1@example.com"],
            "cc_header": [],
            "bcc_header": [],
            "text_body": "ì•ˆë…•í•˜ì„¸ìš”, ì§€ë‚œ íšŒì˜ë¡ ì „ë‹¬ ë“œë¦½ë‹ˆë‹¤...",
            "html_body": "<p>ì•ˆë…•í•˜ì„¸ìš”, ì§€ë‚œ íšŒì˜ë¡ ì „ë‹¬ ë“œë¦½ë‹ˆë‹¤...</p>",
            "date": "2025-10-28T14:30:00Z"
          }
        }
    ```
    
    - **Code**: `204 No Content` (ì˜êµ¬ **ì‚­ì œ** ì„±ê³µ ì‹œ. ì¦‰, íœ´ì§€í†µì—ì„œ í•œ ë²ˆ ë” ì‚­ì œí•  ì‹œ.)
- **Error Response**:
    - **Code**: `401 Unauthorized` (ë¡œê·¸ì¸ ì•ˆí–ˆì„ ì‹œ)
    - **Code**: `404 Not Found` (í•´ë‹¹ ë©”ì¼ì´ ì—†ì„ ì‹œ)

### 3.5. ë©”ì¼ ë°œì†¡ (Send Email)

```jsx
POST /api/account/{account_id}/send/
```

- **ì„¤ëª…**: ì§€ì •ëœ ê³„ì •(`account_id`)ì„ ì‚¬ìš©í•˜ì—¬ ìƒˆë¡œìš´ ë©”ì¼ì„ ë°œì†¡í•˜ê³ , ë³´ë‚¸ í¸ì§€í•¨ì— ë‚´ìš©ì„ ì €ì¥í•©ë‹ˆë‹¤.
- **Request Body**: â† ì´ê±° í˜•ì‹ì€ ë©”ì¼ë°œì†¡ì— ì–´ëŠ fieldë“¤ì´ í•„ìš”í•œì§€ ëª°ë¼ì„œ ì¼ë‹¨ ì„ì‹œë¡œ ë„£ìŒ.

```
  {
    "to": ["recipient1@example.com"],
    "cc": ["recipient2@example.com"],
    "bcc": ["recipient3@example.com"],
    "subject": "API ëª…ì„¸ì„œ ì´ˆì•ˆ",
    "text_body": "ì•ˆë…•í•˜ì„¸ìš”, API ëª…ì„¸ì„œ ì´ˆì•ˆ ì „ë‹¬ë“œë¦½ë‹ˆë‹¤.",
    "html_body": "<p>ì•ˆë…•í•˜ì„¸ìš”, API ëª…ì„¸ì„œ ì´ˆì•ˆ ì „ë‹¬ë“œë¦½ë‹ˆë‹¤.</p>",
    "attachment_ids": [1, 5]
  }
```

- **Success Response**:
    - **Code**: `202 Accepted` (ë©”ì¼ ë°œì†¡ ì ‘ìˆ˜ ì™„ë£Œ.)
    
    ```
        {
          "status": "accepted",
          "message": "Email has been queued for sending."
        }
    ```
    
- **Error Response**:
    - **Code**: `400 Bad Request` (ìˆ˜ì‹ ì, ì œëª©, ë‚´ìš© ë“± í•„ìˆ˜ í•„ë“œ ëˆ„ë½ ë˜ëŠ” í˜•ì‹ ì˜¤ë¥˜)
    - **Code**: `401 Unauthorized` (ë¡œê·¸ì¸ ì•ˆí–ˆì„ ì‹œ)
    - **Code**: `403 Forbidden` (í•´ë‹¹ ê³„ì •ìœ¼ë¡œ ë©”ì¼ì„ ë³´ë‚¼ ê¶Œí•œì´ ì—†ëŠ” ê²½ìš°)
    - **Code**: `404 Not Found` (ì¡´ì¬í•˜ì§€ ì•ŠëŠ” `account_id`ì¸ ê²½ìš°)
    - **Code**: `503 Service Unavailable` (ì™¸ë¶€ SMTP ì„œë²„ ë“± ë°œì†¡ ì„œë¹„ìŠ¤ì— ë¬¸ì œê°€ ìˆëŠ” ê²½ìš°)

---

## 4. ì£¼ì†Œë¡ (Contact)

### 4.1. ì¦ê²¨ì°¾ê¸° ëª©ë¡ ì¡°íšŒ

```jsx
GET /api/contact/{account_id}/
```

- **ì„¤ëª…**: íŠ¹ì • ì´ë©”ì¼ ê³„ì •(`account_id`)ì— ë“±ë¡ëœ ì¦ê²¨ì°¾ê¸° ì£¼ì†Œ ëª©ë¡ì„ ì¡°íšŒí•œë‹¤.
- **Success Response**:
    - **Code**: `200 OK`
        
        ```jsx
        [
          { "id": 1, "address": "friend@example.com" },
          { "id": 2, "address": "boss@work.com" }
        ]
        ```
        
- **Error Response**:
    - **Code**: `400 Bad Request` (ìš”ì²­ í˜•ì‹ì´ ì˜ëª»ëœ ê²½ìš°)
    - **Code**: `403 Forbidden` (ë‚´ ë©”ì¼ê³„ì •ì´ ì•„ë‹Œ ê²½ìš°)
    - **Code**: `404 Not Found` (í—¤ë‹¹ ë©”ì¼ ê³„ì •ì´ ì—°ê²°ë˜ì§€ ì•Šì€ ê²½ìš°)

### 4.2. ì¦ê²¨ì°¾ê¸° ì¶”ê°€

```jsx
POST /api/contact/{account_id}/
```

- **ì„¤ëª…**: íŠ¹ì • ì´ë©”ì¼ ê³„ì •(`account_id`)ì— ìƒˆë¡œìš´ ì£¼ì†Œë¥¼ ì¦ê²¨ì°¾ê¸°ë¡œ ì¶”ê°€í•œë‹¤.
- **Request Body**:
    
    ```jsx
    { "address": "new_friend@example.com" }
    ```
    
- **Success Response**:
    - **Code**: `201 Created`
        
        ```jsx
        { "id": 3, "address": "new_friend@example.com" }
        ```
        
- **Error Response**:
    - **Code**: `400 Bad Request` (ìš”ì²­ í˜•ì‹ì´ ì˜ëª»ëœ ê²½ìš°)
    - **Code**: `403 Forbidden` (ë‚´ ë©”ì¼ê³„ì •ì´ ì•„ë‹Œ ê²½ìš°)
    - **Code**: `409 Conflict` (ì´ë¯¸ ì¦ê²¨ì°¾ê¸°ì— ì¶”ê°€ë˜ì–´ ìˆëŠ” ê²½ìš°)

### 4.3. ì¦ê²¨ì°¾ê¸° ìˆ˜ì •(ì‹œê°„ ë‚¨ìœ¼ë©´ ã„±ã„±)

```jsx
PATCH /api/contact/{contact_id}/
```

- **ì„¤ëª…**: íŠ¹ì • ì—°ë½ì²˜ë¥¼ ìˆ˜ì •í•œë‹¤.
- **Request Body**:
    
    ```jsx
    { "address": "re_friend@example.com" }
    ```
    
- **Success Response**:
    - **Code**: `200 OK`
        
        ```jsx
        { "id": 3, "address": "re_friend@example.com" }
        ```
        
- **Error Response**:
    - **Code**: `400 Bad Request` (ìš”ì²­ í˜•ì‹ì´ ì˜ëª»ëœ ê²½ìš°)
    - **Code**: `403 Forbidden` (ë‚´ ë©”ì¼ê³„ì •ì´ ì•„ë‹Œ ê²½ìš°)

### 4.4. ì¦ê²¨ì°¾ê¸° ì‚­ì œ

```jsx
DELETE /api/contact/{contact_id}/
```

- **ì„¤ëª…**: íŠ¹ì • ì´ë©”ì¼ ê³„ì •(`account_id`)ì˜ ì¦ê²¨ì°¾ê¸°ì—ì„œ íŠ¹ì • ì£¼ì†Œ(`contact_id`)ë¥¼ ì‚­ì œí•œë‹¤.
- **Success Response**:
    - **Code**: `204 No Content`
- **Error Response**:
    - **Code**: `400 Bad Request` (ìš”ì²­ í˜•ì‹ì´ ì˜ëª»ëœ ê²½ìš°)
    - **Code**: `403 Forbidden` (ë‚´ ë©”ì¼ê³„ì •ì´ ì•„ë‹Œ ê²½ìš°)
    - **Code**: `404 Not Found` (í•´ë‹¹ ì£¼ì†Œê°€ ì¦ê²¨ì°¾ê¸° ëª©ë¡ì— ì—†ëŠ” ê²½ìš°)

---

## 5. ë©”ì¼ ìš”ì•½

### 5.1. ë©”ì¼ ìš”ì•½ ìš”ì²­(ê¸°ë³¸ê¸°ëŠ¥)

```jsx
POST /api/email/{email_metadata_id}/summarize/
```

- **ì„¤ëª…**: íŠ¹ì • ë©”ì¼(`email_metadata_id`)ì˜ ìš”ì•½ì„ LLMì— ìš”ì²­í•˜ê³  ê²°ê³¼ë¥¼ ë°›ì•„ DBì— ì €ì¥í•œ í›„, í”„ë¡ íŠ¸ì—”ë“œë¡œ ë¦¬í„´í•œë‹¤.
- **ë°±ì—”ë“œ ë¡œì§**: `is_summarized` í•„ë“œë¥¼ í™•ì¸í•˜ì—¬, **`False`ì¼ ê²½ìš°ì—ë§Œ LLMì„ í˜¸ì¶œí•œë‹¤**. `True`ë¼ë©´ DBì— ì €ì¥ëœ ê¸°ì¡´ ìš”ì•½ë³¸ì„ ì¦‰ì‹œ ë°˜í™˜í•œë‹¤.
- **Success Response**: `200 OK`
    
    ```jsx
    {
      "id": 123,
      "summarized_content": "ì´ê²ƒì€ LLMì´ ìš”ì•½í•œ ë‚´ìš©ì…ë‹ˆë‹¤...",
      "is_summarized": true
    }
    ```
    
- **Error Response**:
    - `Code: 403 Forbidden` (ë‚´ ë©”ì¼ê³„ì •ì´ ì•„ë‹Œ ê²½ìš°)
    - `Code: 404 Not Found` (í•´ë‹¹ ë©”ì¼ì„ ì°¾ì„ ìˆ˜ ì—†ì„ ê²½ìš°)
    - `Code: 503 Service Unavailable` (LLM ì„œë¹„ìŠ¤ ë¬¸ì œ ë°œìƒ ì‹œ)
    
    ```jsx
    { "detail": "The summarization service got error. try again." }
    ```
    

### 5.2. ë©”ì¼ ìš”ì•½ ì¬ìƒì„± ìš”ì²­(í•„ìš” ì‹œ ì¶”ê°€) â†’ ì¢‹ì€ë“¯

```jsx
POST /api/email/{email_metadata_id}/resummarize/
```

- **ì„¤ëª…**: íŠ¹ì • ë©”ì¼(`email_metadata_id`)ì˜ ìš”ì•½ì„ LLMì— ê°•ì œë¡œ ë‹¤ì‹œ ìš”ì²­í•œë‹¤.
- **ë°±ì—”ë“œ ë¡œì§**: `is_summarized` í•„ë“œì™€ ê´€ê³„ì—†ì´, **í•­ìƒ LLMì„ ìƒˆë¡œ í˜¸ì¶œ**í•˜ì—¬ ê¸°ì¡´ `summarized_content`ë¥¼ ë®ì–´ì“´ë‹¤.
- **Success Response**: `200 OK`
    
    ```jsx
    {
      "id": 123,
      "summarized_content": "ì´ê²ƒì€ LLMì´ *ìƒˆë¡œ* ìš”ì•½í•œ ë‚´ìš©ì…ë‹ˆë‹¤...",
      "is_summarized": true
    }
    ```
    
- **Error Response**:
    - `Code: 403 Forbidden` (ë‚´ ë©”ì¼ê³„ì •ì´ ì•„ë‹Œ ê²½ìš°)
    - `Code: 404 Not Found` (í•´ë‹¹ ë©”ì¼ì„ ì°¾ì„ ìˆ˜ ì—†ì„ ê²½ìš°)
    - `Code: 503 Service Unavailable` (LLM ì„œë¹„ìŠ¤ ë¬¸ì œ ë°œìƒ ì‹œ)
    
    ```jsx
    { "detail": "The summarization service got error. try again." }
    ```
    

---

# 6. í…œí”Œë¦¿ (Template) (êµ¬í˜„ ì™„)

í…œí”Œë¦¿ì€ ê³µê°œ í…œí”Œë¦¿(View Template)ê³¼ ë‚´ í…œí”Œë¦¿(My Template)ìœ¼ë¡œ ë‚˜ë‰œë‹¤.

- **ê³µê°œ í…œí”Œë¦¿**: ëª¨ë“  ì‚¬ìš©ìê°€ ì¡°íšŒí•  ìˆ˜ ìˆëŠ” ê¸°ë³¸ í”„ë¦¬ì…‹. â†’ ì´ê±°ëŠ” admin ê³„ì • ë§Œë“¤ê³  dbì— ë¯¸ë¦¬ ë“±ë¡í•´ë†“ì€ ë‹¤ìŒì— ëª¨ë“  userí•œí…Œ ì œê³µí•˜ë©´ ë ë“¯.
- **ë‚´ í…œí”Œë¦¿**: ì‚¬ìš©ìê°€ 'ê³µê°œ í…œí”Œë¦¿'ì„ ì €ì¥í•˜ê±°ë‚˜, ì§ì ‘ ìƒì„±í•˜ì—¬ íŠ¹ì • ì´ë©”ì¼ ê³„ì •(email_account)ì— ê·€ì†ì‹œí‚¨ë‹¤.

## ê³µê°œ í…œí”Œë¦¿ (View Template)

### 6.1. ì „ì²´ ê³µê°œ í…œí”Œë¦¿ ëª©ë¡ ì¡°íšŒ (êµ¬í˜„ ì™„)

```jsx
GET /api/templates/viewtemplate/
```

- **ì„¤ëª…**: ëª¨ë“  ì‚¬ìš©ìê°€ ë³¼ ìˆ˜ ìˆëŠ” ê³µê°œ í…œí”Œë¦¿ í”„ë¦¬ì…‹ ëª©ë¡ì„ ì¡°íšŒí•œë‹¤.
- **Success Response**: `200 OK`
    
    ```jsx
    [
      {
        "id": 101,
        "main_category": "ì¸ì‚¬",
        "sub_category": "ì•ˆë¶€",
        "topic": "í…œí”Œë¦¿ ì´ë¦„",
        "template_title": "ì˜¤ëœë§Œì´ì•¼",
        "template_content": "ì˜ ì§€ë‚´? ì˜¤ëœë§Œì´ì•¼."
      }
      // ...
    ]
    ```
    

![image.png](attachment:88055b3d-8542-4ca1-b352-76e386f36bb6:image.png)

í”„ë¡ íŠ¸ì— ì§ˆë¬¸: ì—¬ê¸°ì„œ Aboutì— ë“¤ì–´ê°€ëŠ”ê²Œ Topicì¸ì§€ ì•„ë‹ˆë©´ template_contentì¸ì§€? template ì„¤ëª…ì„ ìœ„í•œ topic í•„ë“œê°€ ê¼­ í•„ìš”í•œì§€, ì•„ë‹ˆë©´ ë‹¤ë¥¸ í•„ë“œë¡œ ëŒ€ì²´ê°€ëŠ¥í• ì§€ì— ëŒ€í•œ ì§ˆë¬¸ì…ë‹ˆë‹¹

### 6.2. ê³µê°œ í…œí”Œë¦¿ ìƒì„¸ ì¡°íšŒ (êµ¬í˜„ ì™„)

```jsx
GET /api/templates/viewtemplate/{template_id}/
```

- **ì„¤ëª…**: íŠ¹ì • ê³µê°œ í…œí”Œë¦¿(`template_id`)ì˜ ìƒì„¸ ë‚´ìš©ì„ ì¡°íšŒí•œë‹¤.
- **Success Response**: `200 OK`
    
    ```jsx
    {
      "id": 101,
      "main_category": "ì¸ì‚¬",
      "sub_category": "ì•ˆë¶€",
      "topic": "í…œí”Œë¦¿ ì´ë¦„",
      "template_title": "ì˜¤ëœë§Œì´ì•¼",
      "template_content": "ì˜ ì§€ë‚´? ì˜¤ëœë§Œì´ì•¼."
    }
    ```
    
- **Error Response**: `404 Not Found` (í•´ë‹¹ í…œí”Œë¦¿ì„ ì°¾ì„ ìˆ˜ ì—†ìŒ)

### 6.3. ê³µê°œ í…œí”Œë¦¿ ì €ì¥ (ë‚´ í…œí”Œë¦¿ìœ¼ë¡œ ê°€ì ¸ì˜¤ê¸°) (êµ¬í˜„ ì™„)

```jsx
POST /api/templates/viewtemplate/{template_id}/
```

- **ì„¤ëª…**: íŠ¹ì • ê³µê°œ í…œí”Œë¦¿(`template_id`)ì„ **ì„ íƒí•œ ë‚´ ì´ë©”ì¼ ê³„ì •ë“¤**ë¡œ ë³µì‚¬í•˜ì—¬ 'ë‚´ í…œí”Œë¦¿'ìœ¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤. (ë‹¤ì¤‘ ì„ íƒ ì €ì¥ ê¸°ëŠ¥)
- **Request Body**:
    
    ```jsx
    {
    	"user_id": 1,
      "email_account_ids": [1, 2, ...] (list)
    }
    ```
    
    - `account_ids`: (í•„ìˆ˜) í…œí”Œë¦¿ì„ ì €ì¥í•  email_accountì˜ ID ëª©ë¡ (ë¦¬ìŠ¤íŠ¸).
- **Success Response**: `201 Created`
    - ì €ì¥ì— ì„±ê³µí•œ í…œí”Œë¦¿ ê°ì²´ ëª©ë¡(ê°ê° ì–´ëŠ ê³„ì •ì— ì €ì¥ë˜ì—ˆëŠ”ì§€ í¬í•¨)ì„ ë°˜í™˜í•œë‹¤. responseê°€ ë³µì¡í•˜ì§€ ì•Šë„ë¡ í…œí”Œë¦¿ì„ êµ¬ë¶„í•  ìˆ˜ ìˆëŠ” ìµœì†Œí•œì˜ ì •ë³´(template_title, id)ë§Œ ë°˜í™˜í•œë‹¤.
    
    ```jsx
    [
      {
        "id": 50, // ìƒˆë¡œ ìƒì„±ëœ 'ë‚´ í…œí”Œë¦¿' ID
        "template_title": "ì˜¤ëœë§Œì´ì•¼",
        "topic": "í…œí”Œë¦¿ ì´ë¦„",
        "email_account": {
          "id": 1,
          "address": "user1@gmail.com"
        }
      },
      {
        "id": 51, // ìƒˆë¡œ ìƒì„±ëœ 'ë‚´ í…œí”Œë¦¿' ID
        "topic": "í…œí”Œë¦¿ ì´ë¦„",
        "email_account": {
          "id": 2,
          "address": "user1@naver.com"
        }
      }
    ] 
    ```
    
- **Error Response**:
    - `400 Bad Request`: `account_ids` í•„ë“œê°€ ì—†ê±°ë‚˜ ë¹„ì–´ìˆì„ ë•Œ.
    - `403 Forbidden`: `account_ids`ì— í¬í•¨ëœ ê³„ì •ì´ ë‚´ ì†Œìœ ê°€ ì•„ë‹ ë•Œ.
    - `404 Not Found`: `{template_id}`ì˜ ê³µê°œ í…œí”Œë¦¿ì„ ì°¾ì„ ìˆ˜ ì—†ì„ ë•Œ.

---

## Part 2. ë‚´ í…œí”Œë¦¿ (My Template)

### 6.4. ë‚´ í…œí”Œë¦¿ ì „ì²´ ëª©ë¡ ì¡°íšŒâ†’ ì´ ë¶€ë¶„ì—ì„œ ê³µìš© í…œí”Œë¦¿ê³¼ ìì²´ í…œí”Œë¦¿ì„ êµ¬ë¶„í•˜ê¸° ìœ„í•´ì„œëŠ” user_idê°€ í•„ìš”í•¨ â† ì‚¬ì‹¤ ì´ê±´ ë‚´ í…œí”Œë¦¿ìœ¼ë¡œ ê°€ì ¸ì˜¨ ì‹œì ì—ì„œ êµ¬ë¶„í•  í•„ìš”ê°€ ìˆë‚˜ ì‹¶ì–´ì„œ ì•ˆë„£ì€ ê±°ê¸´ í•¨ â† ì• ì´ˆì— dbì—ì„œ ì°¾ê¸°ìœ„í•´ ì´ê²Œ(user_id) í•„ìš”í•¨ (êµ¬í˜„ ì™„)

```jsx
GET /api/templates/mytemplate/list/{user_id}
```

- **ì„¤ëª…**: **ë¡œê·¸ì¸í•œ ì‚¬ìš©ìê°€ ì†Œìœ í•œ ëª¨ë“  ì´ë©”ì¼ ê³„ì •ì˜ í…œí”Œë¦¿**ì„ í•œêº¼ë²ˆì— ì¡°íšŒí•œë‹¤.
- **Success Response**: `200 OK`
    - ê° í…œí”Œë¦¿ì´ ì–´ëŠ ê³„ì • ì†Œì†ì¸ì§€ `account` ê°ì²´(id, address)ë¥¼ í¬í•¨í•˜ì—¬ ë°˜í™˜í•œë‹¤.
    
    ```jsx
    [
      {
        "id": 1,
        "main_category": "ì—…ë¬´",
        "sub_category": "ë³´ê³ ",
        "topic": "í…œí”Œë¦¿ ì´ë¦„",
        "template_title": "ì£¼ê°„ ì—…ë¬´ ë³´ê³ ",
        "template_content": "ì£¼ê°„ ì—…ë¬´ ë³´ê³  ë“œë¦½ë‹ˆë‹¤.",
        "email_account": {
          "id": 1,
          "address": "user1@gmail.com"
        }
      },
      {
        "id": 2,
        "main_category": "ì¸ì‚¬",
        "sub_category": "ì•ˆë¶€",
        "topic": "í…œí”Œë¦¿ ì´ë¦„",
        "template_title": "ì˜¤ëœë§Œì´ì•¼",
        "template_content": "ì˜ ì§€ë‚´?",
        "email_account": {
          "id": 2,
          "address": "user2@naver.com"
        }
      },
      ...
    ]
    ```
    
- `401 Unauthorized`: mailer ë¡œê·¸ì¸ ì•ˆí•œ ìƒíƒœì¼ ì‹œ.

### 6.4-1. ë‚´ í…œí”Œë¦¿ ìƒì„¸ ì¡°íšŒ (êµ¬í˜„ ì™„)

```jsx
GET /api/templates/mytemplate/{template_id}/
```

- **ì„¤ëª…**: **ì‚¬ìš©ìê°€ ì„ íƒí•œ í…œí”Œë¦¿**ì„ ì¡°íšŒí•œë‹¤.
- **Success Response**: `200 OK`

```jsx
[
  {
    "id": 1,
    "main_category": "ì—…ë¬´",
    "sub_category": "ë³´ê³ ",
    "topic": "í…œí”Œë¦¿ ì´ë¦„",
    "template_title": "ì£¼ê°„ ì—…ë¬´ ë³´ê³ ",
    "template_content": "ì£¼ê°„ ì—…ë¬´ ë³´ê³  ë“œë¦½ë‹ˆë‹¤.",
    "email_account": {
      "id": 1,
      "address": "user1@gmail.com"
    }
]
```

- `401 Unauthorized`: mailer ë¡œê·¸ì¸ ì•ˆí•œ ìƒíƒœì¼ ì‹œ.
- `404 Not Found`:  í•´ë‹¹ í…œí”Œë¦¿ì„ ì°¾ì„ ìˆ˜ ì—†ì„ ë•Œ.

### 6.5. ë‚´ í…œí”Œë¦¿ ì‹ ê·œ ìƒì„± (êµ¬í˜„ ì™„)

```jsx
POST /api/templates/mytemplate/create/
```

- **ì„¤ëª…**: ìƒˆë¡œìš´ í…œí”Œë¦¿ì„ ì‘ì„±í•˜ì—¬ íŠ¹ì • ì´ë©”ì¼ ê³„ì •(`email_account_id`)ì— ì €ì¥í•œë‹¤. ì´ ë•Œ main_categoryëŠ” â€œê°œì¸ í…œí”Œë¦¿â€ìœ¼ë¡œ ê¸°ì…í•œë‹¤.
- **Query Parameters**:
    - `email_account_id` :  íƒ¬í”Œë¦¿ì„ ì €ì¥í•˜ê³ ì í•˜ëŠ” ì´ë©”ì¼ ê³„ì • id.
    - `user_id` : í•´ë‹¹ í…œí”Œë¦¿ì„ ì €ì¥í•˜ê³ ì í•˜ëŠ” ë©”ì¼ëŸ¬ ê³„ì • id.
- **Request Body**:
    
    ```jsx
    {
      "sub_category": "ì„œë¸Œ ì¹´í…Œê³ ë¦¬",
      "topic": "í…œí”Œë¦¿ ì´ë¦„",
      "template_title": "ì£¼ê°„ ì—…ë¬´ ë³´ê³ ",
      "template_content": "ì£¼ê°„ ì—…ë¬´ ë³´ê³  ë“œë¦½ë‹ˆë‹¤."
    }
    ```
    
- **Success Response**: `201 Created`
- **Error Response**:
    - `400 Bad Request`: request bodyì˜ ì¼ë¶€ í•„ë“œê°€ ì—†ê±°ë‚˜ ë¹„ì–´ìˆì„ ë•Œ.
    - `403 Forbidden`:  ìš”ì²­í•œ ê³„ì •ì´ ë‚´ ì†Œìœ ê°€ ì•„ë‹ ë•Œ.
    - `404 Not Found`:  í•´ë‹¹ ê³„ì •ì„ ì°¾ì„ ìˆ˜ ì—†ì„ ë•Œ.

### 6.6. ë‚´ í…œí”Œë¦¿ ìˆ˜ì • (êµ¬í˜„ ì™„)

```jsx
PATCH /api/template/mytemplate/{template_id}/
```

- **ì„¤ëª…**: íŠ¹ì • ì´ë©”ì¼ ê³„ì •(`account_id`)ì— ì†í•œ íŠ¹ì • í…œí”Œë¦¿(`template_id`)ì„ ìˆ˜ì •í•œë‹¤. db êµ¬ì¡°ìƒ template_idëŠ” ê³ ìœ í•œ ê°’ì´ë¼ account_idì˜ êµ¬ë¶„ì€ ë”±íˆ í•„ìš”ì—†ìŒ.
- **Request Body**: (ì¼ë¶€ í•„ë“œë§Œ ì „ì†¡)
    
    ```jsx
    {
      "sub_category": "ì„œë¸Œ ì¹´í…Œê³ ë¦¬",
      "topic": "í…œí”Œë¦¿ ì´ë¦„",
      "template_title": "ì›”ê°„ ì—…ë¬´ ë³´ê³ ",
      "template_content": "ì›”ê°„ ì—…ë¬´ ë³´ê³  ë“œë¦½ë‹ˆë‹¤."
    }
    ```
    
- **Success Response**: `200 OK`
- `400 Bad Request`: request bodyì˜ ì¼ë¶€ í•„ë“œê°€ ì—†ê±°ë‚˜ ë¹„ì–´ìˆì„ ë•Œ.
- `403 Forbidden`:  ìš”ì²­í•œ ê³„ì •ì´ ë‚´ ì†Œìœ ê°€ ì•„ë‹ ë•Œ.
- `404 Not Found`:  í•´ë‹¹ í…œí”Œë¦¿ì„ ì°¾ì„ ìˆ˜ ì—†ì„ ë•Œ.

### 6.7. ë‚´ í…œí”Œë¦¿ ì‚­ì œ (êµ¬í˜„ ì™„)

```jsx
DELETE /api/template/mytemplate/{template_id}/
```

- **ì„¤ëª…**: íŠ¹ì • ì´ë©”ì¼ ê³„ì •(`account_id`)ì— ì†í•œ íŠ¹ì • í…œí”Œë¦¿(`template_id`)ì„ ì‚­ì œí•œë‹¤.
- **Success Response**: `204 No Content`
- `403 Forbidden`:  ìš”ì²­í•œ ê³„ì •ì´ ë‚´ ì†Œìœ ê°€ ì•„ë‹ ë•Œ.
- `404 Not Found`:  í•´ë‹¹ í…œí”Œë¦¿ì„ ì°¾ì„ ìˆ˜ ì—†ì„ ë•Œ.

## ì§ˆë¬¸ ë° ì œì•ˆ

ë©”ì¼ ë³´ë‚´ë„ë¡ í•˜ëŠ” apië„ í•„ìš”í•¨ â† ì„ì‹œë¡œ ì¶”ê°€í•¨. request field ì–´ë–»ê²Œ í•´ì•¼í• ì§€ëŠ” ì˜ ëª°ë£¨..

ë©”ì¼ ë°›ì•„ì„œ ìŠ¤íŒ¸ ì²˜ë¦¬ê¹Œì§€ ëŒë¦¬ëŠ”ê±´ ë‹¤ ë°±ê·¸ë¼ìš´ë“œì¸ê±°ì§€? â€” YES.

ë©”ì¼ë“¤ì„ ë¶ˆëŸ¬ì˜¬ ë•Œ, ì²¨ë¶€íŒŒì¼ì„ í”„ë¡ íŠ¸ë¡œ ë‹¤ì‹œ ë³´ë‚´ì£¼ëŠ” ë°©ë²•ë„ ìƒê°í•´ë´ì•¼í• ë“¯. â† ì¼ë‹¨ í™•ì¸. ì•„ì§ ëª…ì„¸ì„œì— ë°˜ì˜ì€ ì•ˆí•¨. í”„ë¡ íŠ¸ì— íŒŒì¼ì˜ s3ì„œë²„ URLì„ ì „ë‹¬í•˜ëŠ” ë°©ì‹ ìƒê°ì¤‘.

ê³ ìƒí•˜ì…¨ìŠµë‹ˆë‹¤~~~~!!